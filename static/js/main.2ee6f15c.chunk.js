(this.webpackJsonpfeatrack=this.webpackJsonpfeatrack||[]).push([[0],{192:function(t,e,c){"use strict";c.r(e);var a=c(0),n=c.n(a),o=c(17),i=c.n(o),r=(c(44),c(6)),s=c(10),d=c.n(s),j=c(35),l=c(38),u=c(5),b=c(36),h=c(193),p=c(194),f=c(37),O=(c(28),c(29),c(4)),x={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},m={0:"Minor",1:"Major"},g={0:"A",1:"B"};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var y=function(t){var e=Object(a.useState)(""),c=Object(r.a)(e,2),n=c[0],o=c[1],i=Object(a.useState)(""),s=Object(r.a)(i,2),j=s[0],l=s[1],y=Object(a.useState)(""),v=Object(r.a)(y,2),k=v[0],C=v[1],w=Object(a.useState)(""),S=Object(r.a)(w,2),B=S[0],A=S[1],I=Object(a.useState)(""),T=Object(r.a)(I,2),F=T[0],z=T[1],R=Object(a.useState)(0),H=Object(r.a)(R,2),M=H[0],D=H[1],E=Object(a.useState)(""),K=Object(r.a)(E,2),L=K[0],P=K[1],N=Object(a.useState)(""),U=Object(r.a)(N,2),_=U[0],G=U[1],J=Object(a.useState)(""),q=Object(r.a)(J,2),V=q[0],Y=q[1];function Q(t){var e={headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}};d.a.get("https://api.spotify.com/v1/tracks/".concat(t),e).then((function(t){var e=t.data;l(e.artists[0].name),C(e.album.images[0].url),A(e.name),z(function(t){var e=Math.floor(t/6e4),c=(t%6e4/1e3).toFixed(0);return e+":"+(c<10?"0":"")+c}(e.duration_ms))})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/tracks/").concat(t))})),d.a.get("https://api.spotify.com/v1/audio-features?ids=".concat(t),e).then((function(e){var c=e.data.audio_features[0];D(c.tempo.toFixed(1)),P(x[c.key].concat(" ",m[c.mode]));var a=Object(f.getKey)({pitchClass:c.key,mode:c.mode}),n="".concat(a.camelotPosition).concat(g[a.mode]);Y(n),G("https://open.spotify.com/track/".concat(t))})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/audio-features?ids=").concat(t))}))}return Object(a.useLayoutEffect)((function(){!function(){var t={headers:{Authorization:"Basic ".concat(b.Buffer.from("".concat("bb1f4a4747b241498c617ade99bd166d",":").concat("fab9e637ef614626803d203a743cdc0c"),"utf-8").toString("base64")),"Content-Type":"application/x-www-form-urlencoded"}};d.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",t).then((function(t){o(t.data.access_token)})).catch((function(t){console.log("".concat(t.response.status," on fetch token."))}))}(),t.trackId&&(l(""),A(""),Q(t.trackId))}),[t.trackId]),""===t.trackId?Object(O.jsx)("div",{}):"track"!==t.idType?Object(O.jsx)("div",{children:Object(O.jsx)(u.Block,{textAlign:"center",style:{width:300,margin:"auto"},children:Object(O.jsx)(u.Notification,{color:"warning",children:Object(O.jsx)("p",{children:"ERROR: URL/URI is not track."})})})}):""===j?Object(O.jsx)("div",{}):Object(O.jsx)("div",{children:Object(O.jsxs)(u.Card,{style:{width:350,margin:"auto"},children:[Object(O.jsx)(u.Card.Header,{children:Object(O.jsxs)(u.Card.Header.Title,{size:6,children:[B,Object(O.jsx)("br",{}),j]})}),Object(O.jsx)(u.Card.Image,{size:"square",src:k}),Object(O.jsxs)(u.Card.Content,{children:[Object(O.jsx)(u.Media,{children:Object(O.jsx)(u.Media.Item,{children:Object(O.jsxs)(u.Heading,{subtitle:!0,size:6,children:[Object(O.jsxs)("p",{children:["BPM: ",M]}),Object(O.jsxs)("p",{children:["Key: ",L]}),Object(O.jsxs)("p",{children:["Camelot: ",V]}),Object(O.jsxs)("p",{children:["Duration: ",F]})]})})}),Object(O.jsx)(h.a,{title:"".concat(B,"/").concat(j,"\nBPM:").concat(M,"\nKey: ").concat(L,"\nCamelot: ").concat(V),url:_,hashtags:["FEATRACK"],children:Object(O.jsx)(p.a,{size:32,round:!0})}),Object(O.jsx)(u.Button,{onClick:function(){var t=[B,j,M,L,V].join();navigator.clipboard.writeText(t).then((function(e){console.log("Copy ".concat(t," to clipboard."))})).catch((function(t){console.log("Failed to copy track features to clipboard.")}))},children:"Copy audio features to clipboard"})]})]})})};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var v=u.Form.Input;var k=function(){var t=Object(a.useState)(""),e=Object(r.a)(t,2),c=e[0],n=e[1],o=Object(a.useState)(NaN),i=Object(r.a)(o,2),s=i[0],d=i[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),p=h[0],f=h[1];function x(t){if(13===t.which){t.preventDefault();var e=function(t){var e=new URL(t);if(console.log(e),"https:"===e.protocol){var c=e.pathname.split("/");if("track"===c[1])return f(c[1]),c[2]}else if("spotify:"===e.protocol){var a=e.pathname.split(":");if(2===a.length&&"track"===a[0])return f(a[0]),a[1]}}(t.target.value);n(e),d(t.which)}}return Object(O.jsx)("div",{children:Object(O.jsx)(u.Hero,{children:Object(O.jsx)(u.Hero.Body,{children:Object(O.jsxs)(u.Container,{children:[Object(O.jsx)(u.Heading,{size:6,textAlign:"right",children:Object(O.jsx)("a",{href:"https://github.com/NaoY-2501/featrack",children:Object(O.jsx)(j.a,{icon:l.a,size:"2x"})})}),Object(O.jsx)(u.Heading,{size:1,textAlign:"center",children:"FEATRACK"}),Object(O.jsx)(u.Heading,{subtitle:!0,size:5,textAlign:"center",children:"Browse audio features with Spotify API"}),Object(O.jsx)(u.Block,{children:Object(O.jsx)(u.Box,{style:{width:600,margin:"auto"},children:Object(O.jsx)(v,{size:"medium",type:"text",placeholder:"Track URL or Spotify URI",defaultValue:c,onKeyDown:function(t){return x(t)}})})}),Object(O.jsx)(u.Block,{children:Object(O.jsx)(y,{keyNum:s,trackId:c,idType:p})})]})})})})},C=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,195)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,o=e.getLCP,i=e.getTTFB;c(t),a(t),n(t),o(t),i(t)}))};i.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(k,{})}),document.getElementById("root")),C()},28:function(t,e,c){},44:function(t,e,c){}},[[192,1,2]]]);
//# sourceMappingURL=main.2ee6f15c.chunk.js.map