(this.webpackJsonpfeatrack=this.webpackJsonpfeatrack||[]).push([[0],{181:function(t,e,c){"use strict";c.r(e);var o=c(0),n=c.n(o),a=c(14),i=c.n(a),r=(c(34),c(7)),s=c(10),d=c.n(s),l=c(5),j=c(29),u=(c(57),c(23),c(4)),O={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},b={0:"Minor",1:"Major"};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var p=function(t){var e=Object(o.useState)(""),c=Object(r.a)(e,2),n=c[0],a=c[1],i=Object(o.useState)(""),s=Object(r.a)(i,2),p=s[0],f=s[1],h=Object(o.useState)(""),x=Object(r.a)(h,2),g=x[0],v=x[1],S=Object(o.useState)(""),C=Object(r.a)(S,2),T=C[0],_=C[1],m=Object(o.useState)(""),y=Object(r.a)(m,2),k=y[0],E=y[1],I=Object(o.useState)(0),w=Object(r.a)(I,2),A=w[0],R=w[1],P=Object(o.useState)(""),F=Object(r.a)(P,2),B=F[0],D=F[1];function H(t){var e={headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}};d.a.get("https://api.spotify.com/v1/tracks/".concat(t),e).then((function(t){var e=t.data;console.log(e),f(e.artists[0].name),v(e.album.images[0].url),_(e.name),E(function(t){var e=Math.floor(t/6e4),c=(t%6e4/1e3).toFixed(0);return e+":"+(c<10?"0":"")+c}(e.duration_ms))})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/tracks/").concat(t))})),d.a.get("https://api.spotify.com/v1/audio-features?ids=".concat(t),e).then((function(t){var e=t.data.audio_features[0];console.log(e),R(e.tempo.toFixed(1)),D(O[e.key].concat(" ",b[e.mode]))})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/audio-features?ids=").concat(t))}))}return Object(o.useLayoutEffect)((function(){!function(){var t=Object({NODE_ENV:"production",PUBLIC_URL:"/featrack",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SPOTIFY_API_CLIENT_ID,e=Object({NODE_ENV:"production",PUBLIC_URL:"/featrack",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SPOTIFY_API_CLIENT_SECRET;console.log(t[0],e[0]);var c={headers:{Authorization:"Basic ".concat(j.Buffer.from("".concat(t,":").concat(e),"utf-8").toString("base64")),"Content-Type":"application/x-www-form-urlencoded"}};d.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",c).then((function(t){console.log(t.data),a(t.data.access_token)})).catch((function(t){console.log(t)}))}(),t.trackId&&(console.log(t.trackId),f(""),_(""),H(t.trackId))}),[t.trackId]),""===t.trackId?Object(u.jsx)("div",{}):"track"!==t.idType?Object(u.jsx)("div",{children:Object(u.jsx)(l.Block,{textAlign:"center",style:{width:300,margin:"auto"},children:Object(u.jsx)(l.Notification,{color:"warning",children:Object(u.jsx)("p",{children:"ERROR: URL/URI is not track."})})})}):""===p?Object(u.jsx)("div",{}):Object(u.jsx)("div",{children:Object(u.jsxs)(l.Card,{style:{width:350,margin:"auto"},children:[Object(u.jsx)(l.Card.Header,{children:Object(u.jsxs)(l.Card.Header.Title,{size:6,children:[T,Object(u.jsx)("br",{}),p]})}),Object(u.jsx)(l.Card.Image,{size:"square",src:g}),Object(u.jsxs)(l.Card.Content,{children:[Object(u.jsx)(l.Media,{children:Object(u.jsx)(l.Media.Item,{children:Object(u.jsxs)(l.Heading,{subtitle:!0,size:6,children:[Object(u.jsxs)("p",{children:["BPM: ",A]}),Object(u.jsxs)("p",{children:["Key: ",B]}),Object(u.jsxs)("p",{children:["Duration: ",k]})]})})}),Object(u.jsx)(l.Button,{onClick:function(){var t=[T,p,A,B].join();navigator.clipboard.writeText(t).then((function(e){console.log("Copy ".concat(t," to clipboard."))})).catch((function(t){console.log("Failed to copy track features to clipboard.")}))},children:"Copy audio features to clipboard"})]})]})})};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var f=l.Form.Input;var h=function(){var t=Object(o.useState)(""),e=Object(r.a)(t,2),c=e[0],n=e[1],a=Object(o.useState)(NaN),i=Object(r.a)(a,2),s=i[0],d=i[1],j=Object(o.useState)(""),O=Object(r.a)(j,2),b=O[0],h=O[1];function x(t){if(13===t.which){t.preventDefault();var e=function(t){var e=new URL(t);if(console.log(e),"https:"===e.protocol){var c=e.pathname.split("/");if("track"===c[1])return h(c[1]),c[2]}else if("spotify:"===e.protocol){var o=e.pathname.split(":");if(2===o.length&&"track"===o[0])return h(o[0]),o[1]}}(t.target.value);n(e),d(t.which)}}return Object(u.jsx)("div",{children:Object(u.jsx)(l.Hero,{children:Object(u.jsx)(l.Hero.Body,{children:Object(u.jsxs)(l.Container,{children:[Object(u.jsx)(l.Heading,{size:1,textAlign:"center",children:"FEATRACK"}),Object(u.jsx)(l.Heading,{subtitle:!0,size:5,textAlign:"center",children:"Browse audio features with Spotify API"}),Object(u.jsx)(l.Block,{children:Object(u.jsx)(l.Box,{style:{width:600,margin:"auto"},children:Object(u.jsx)(f,{size:"medium",type:"text",placeholder:"Track URL or Spotify URI",defaultValue:c,onKeyDown:function(t){return x(t)}})})}),Object(u.jsx)(l.Block,{children:Object(u.jsx)(p,{keyNum:s,trackId:c,idType:b})})]})})})})},x=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,182)).then((function(e){var c=e.getCLS,o=e.getFID,n=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),o(t),n(t),a(t),i(t)}))};i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(h,{})}),document.getElementById("root")),x()},34:function(t,e,c){},57:function(t,e,c){}},[[181,1,2]]]);
//# sourceMappingURL=main.398afbf7.chunk.js.map