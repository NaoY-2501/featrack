(this.webpackJsonpfeatrack=this.webpackJsonpfeatrack||[]).push([[0],{182:function(t,e,c){"use strict";c.r(e);var n=c(0),a=c.n(n),o=c(14),i=c.n(o),r=(c(35),c(6)),s=c(10),d=c.n(s),l=c(5),j=c(29),u=c(183),b=c(184),p=(c(58),c(23),c(4)),h={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},f={0:"Minor",1:"Major"};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var O=function(t){var e=Object(n.useState)(""),c=Object(r.a)(e,2),a=c[0],o=c[1],i=Object(n.useState)(""),s=Object(r.a)(i,2),O=s[0],x=s[1],g=Object(n.useState)(""),y=Object(r.a)(g,2),m=y[0],v=y[1],k=Object(n.useState)(""),w=Object(r.a)(k,2),C=w[0],B=w[1],S=Object(n.useState)(""),I=Object(r.a)(S,2),T=I[0],A=I[1],F=Object(n.useState)(0),M=Object(r.a)(F,2),R=M[0],z=M[1],H=Object(n.useState)(""),K=Object(r.a)(H,2),P=K[0],D=K[1],E=Object(n.useState)(""),L=Object(r.a)(E,2),U=L[0],_=L[1],N=Object(n.useState)(""),G=Object(r.a)(N,2),J=G[0],q=G[1];function V(t){var e={headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}};d.a.get("https://api.spotify.com/v1/tracks/".concat(t),e).then((function(t){var e=t.data;console.log(e),x(e.artists[0].name),v(e.album.images[0].url),B(e.name),A(function(t){var e=Math.floor(t/6e4),c=(t%6e4/1e3).toFixed(0);return e+":"+(c<10?"0":"")+c}(e.duration_ms))})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/tracks/").concat(t))})),d.a.get("https://api.spotify.com/v1/audio-features?ids=".concat(t),e).then((function(e){var c=e.data.audio_features[0];console.log(c),z(c.tempo.toFixed(1)),D(h[c.key].concat(" ",f[c.mode])),_("".concat(C,"/").concat(O,"\nBPM:").concat(R,"\nKey: ").concat(P,"\n")),q("https://open.spotify.com/track/".concat(t)),console.log(U)})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/audio-features?ids=").concat(t))}))}return Object(n.useLayoutEffect)((function(){!function(){var t={headers:{Authorization:"Basic ".concat(j.Buffer.from("".concat("bb1f4a4747b241498c617ade99bd166d",":").concat("fab9e637ef614626803d203a743cdc0c"),"utf-8").toString("base64")),"Content-Type":"application/x-www-form-urlencoded"}};d.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",t).then((function(t){o(t.data.access_token)})).catch((function(t){console.log("".concat(t.response.status," on fetch token."))}))}(),t.trackId&&(x(""),B(""),V(t.trackId),console.log("".concat(C,"/").concat(O,"\nBPM:").concat(R,"\nKey: ").concat(P,"\n")),console.log(U))}),[t.trackId]),""===t.trackId?Object(p.jsx)("div",{}):"track"!==t.idType?Object(p.jsx)("div",{children:Object(p.jsx)(l.Block,{textAlign:"center",style:{width:300,margin:"auto"},children:Object(p.jsx)(l.Notification,{color:"warning",children:Object(p.jsx)("p",{children:"ERROR: URL/URI is not track."})})})}):""===O?Object(p.jsx)("div",{}):Object(p.jsx)("div",{children:Object(p.jsxs)(l.Card,{style:{width:350,margin:"auto"},children:[Object(p.jsx)(l.Card.Header,{children:Object(p.jsxs)(l.Card.Header.Title,{size:6,children:[C,Object(p.jsx)("br",{}),O]})}),Object(p.jsx)(l.Card.Image,{size:"square",src:m}),Object(p.jsxs)(l.Card.Content,{children:[Object(p.jsx)(l.Media,{children:Object(p.jsx)(l.Media.Item,{children:Object(p.jsxs)(l.Heading,{subtitle:!0,size:6,children:[Object(p.jsxs)("p",{children:["BPM: ",R]}),Object(p.jsxs)("p",{children:["Key: ",P]}),Object(p.jsxs)("p",{children:["Duration: ",T]})]})})}),Object(p.jsx)(u.a,{title:"".concat(C,"/").concat(O,"\nBPM:").concat(R,"\nKey: ").concat(P,"\n"),url:J,hashtags:["FEATRACK"],children:Object(p.jsx)(b.a,{size:32,round:!0})}),Object(p.jsx)(l.Button,{onClick:function(){var t=[C,O,R,P].join();navigator.clipboard.writeText(t).then((function(e){console.log("Copy ".concat(t," to clipboard."))})).catch((function(t){console.log("Failed to copy track features to clipboard.")}))},children:"Copy audio features to clipboard"})]})]})})};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var x=l.Form.Input;var g=function(){var t=Object(n.useState)(""),e=Object(r.a)(t,2),c=e[0],a=e[1],o=Object(n.useState)(NaN),i=Object(r.a)(o,2),s=i[0],d=i[1],j=Object(n.useState)(""),u=Object(r.a)(j,2),b=u[0],h=u[1];function f(t){if(13===t.which){t.preventDefault();var e=function(t){var e=new URL(t);if(console.log(e),"https:"===e.protocol){var c=e.pathname.split("/");if("track"===c[1])return h(c[1]),c[2]}else if("spotify:"===e.protocol){var n=e.pathname.split(":");if(2===n.length&&"track"===n[0])return h(n[0]),n[1]}}(t.target.value);a(e),d(t.which)}}return Object(p.jsx)("div",{children:Object(p.jsx)(l.Hero,{children:Object(p.jsx)(l.Hero.Body,{children:Object(p.jsxs)(l.Container,{children:[Object(p.jsx)(l.Heading,{size:1,textAlign:"center",children:"FEATRACK"}),Object(p.jsx)(l.Heading,{subtitle:!0,size:5,textAlign:"center",children:"Browse audio features with Spotify API"}),Object(p.jsx)(l.Block,{children:Object(p.jsx)(l.Box,{style:{width:600,margin:"auto"},children:Object(p.jsx)(x,{size:"medium",type:"text",placeholder:"Track URL or Spotify URI",defaultValue:c,onKeyDown:function(t){return f(t)}})})}),Object(p.jsx)(l.Block,{children:Object(p.jsx)(O,{keyNum:s,trackId:c,idType:b})})]})})})})},y=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,185)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;c(t),n(t),a(t),o(t),i(t)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root")),y()},35:function(t,e,c){},58:function(t,e,c){}},[[182,1,2]]]);
//# sourceMappingURL=main.f3b088a8.chunk.js.map