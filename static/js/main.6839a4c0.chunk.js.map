{"version":3,"sources":["TrackInfo.js","Featrack.js","reportWebVitals.js","index.js"],"names":["PITCH_CLASS","MODE","axios","defaults","headers","post","TrackInfo","props","useState","token","setToken","artist","setArtist","image","setImage","title","setTitle","duration","setDuration","bpm","setBpm","pitch","setPitch","tweetBody","setTweetBody","trackUrl","setTrackUrl","getTrackInfo","trackId","config","get","then","res","data","console","log","millis","minutes","Math","floor","seconds","toFixed","msToMinutesAndSecond","catch","error","response","status","audio_features","concat","useLayoutEffect","Buffer","from","process","toString","getToken","idType","textAlign","style","width","margin","color","Header","Title","size","Image","src","Content","Item","subtitle","TwitterShareButton","url","hashtags","TwitterIcon","round","onClick","csvTrackFeatures","join","navigator","clipboard","writeText","result","Input","Form","Featrack","track","setId","NaN","pressedKey","setKey","setIdType","handlePress","e","which","preventDefault","value","URL","protocol","paths","pathname","split","parts","length","parseId","target","Body","type","placeholder","defaultValue","onKeyDown","keyNum","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6839a4c0.chunk.js","sourcesContent":["import {Buffer} from \"buffer\";\n\nimport axios from \"axios\";\nimport React, {useState, useLayoutEffect} from 'react';\nimport {Block, Button, Card, Heading, Media, Notification} from \"react-bulma-components\";\nimport { TwitterShareButton } from \"react-share\";\nimport { TwitterIcon } from \"react-share\";\n\nimport './Featrack.css';\nimport 'bulma/css/bulma.min.css';\n\nconst PITCH_CLASS = {\n    0: 'C',\n    1: 'C#',\n    2: 'D',\n    3: 'D#',\n    4: 'E',\n    5: 'F',\n    6: 'F#',\n    7: 'G',\n    8: 'G#',\n    9: 'A',\n    10: 'A#',\n    11: 'B',\n}\n\nconst MODE = {\n    0: 'Minor',\n    1: 'Major'\n}\n\naxios.defaults.headers.post['Content-Type'] ='application/x-www-form-urlencoded'\n\nfunction TrackInfo(props) {\n    const [token, setToken] = useState('')\n    const [artist, setArtist] = useState('')\n    const [image, setImage] = useState('')\n    const [title, setTitle] = useState('')\n    const [duration, setDuration] = useState('')\n    const [bpm, setBpm] = useState(0)\n    const [pitch, setPitch] = useState('')\n    const [tweetBody, setTweetBody] = useState('')\n    const [trackUrl, setTrackUrl] = useState('')\n\n    function msToMinutesAndSecond(millis){\n        const minutes = Math.floor(millis / 60000)\n        const seconds = ((millis % 60000) / 1000).toFixed(0)\n        return minutes + \":\" + (seconds < 10 ? '0' : '') + seconds\n    }\n\n    function getToken() {\n        const clientId = process.env.REACT_APP_SPOTIFY_API_CLIENT_ID\n        const clientSecret = process.env.REACT_APP_SPOTIFY_API_CLIENT_SECRET\n        const data = 'grant_type=client_credentials'\n        const config = {\n            headers: {\n                'Authorization': `Basic ${Buffer.from(`${clientId}:${clientSecret}`, 'utf-8').toString('base64')}`,\n                'Content-Type': 'application/x-www-form-urlencoded',\n            }\n        }\n        axios.post(\n            'https://accounts.spotify.com/api/token',\n            data,\n            config\n        ).then(res => {\n            setToken(res['data']['access_token'])\n        }).catch(error => {\n            console.log(`${error.response.status} on fetch token.`)\n        })\n    }\n\n    function getHeaders(){\n        return {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json',\n            }\n        }\n    }\n\n    function getTrackInfo(trackId) {\n        const config = getHeaders()\n        axios.get(\n            `https://api.spotify.com/v1/tracks/${trackId}`,\n            config\n        ).then(res => {\n            const data = res.data\n            console.log(data)\n            setArtist(data['artists'][0]['name'])\n            setImage(data['album']['images'][0]['url'])\n            setTitle(data['name'])\n            setDuration(msToMinutesAndSecond(data['duration_ms']))\n        }).catch(error => {\n            console.log(`${error.response.status} from https://api.spotify.com/v1/tracks/${trackId}`)\n        })\n        axios.get(\n            `https://api.spotify.com/v1/audio-features?ids=${trackId}`,\n            config\n        ).then(res => {\n            const data = res['data']\n            const audio_features = data['audio_features'][0]\n            console.log(audio_features)\n            setBpm(audio_features['tempo'].toFixed(1))\n            setPitch(\n                PITCH_CLASS[audio_features['key']].concat(' ', MODE[audio_features['mode']])\n            )\n            setTweetBody(`${title}/${artist}\\nBPM:${bpm}\\nKey: ${pitch}\\n`)\n            setTrackUrl(`https://open.spotify.com/track/${trackId}`)\n            console.log(tweetBody)\n        }).catch(error => {\n            console.log(`${error.response.status} from https://api.spotify.com/v1/audio-features?ids=${trackId}`)\n        })\n    }\n\n    function copyHandler() {\n        const trackFeatures = [\n            title,\n            artist,\n            bpm,\n            pitch\n        ]\n        const csvTrackFeatures = trackFeatures.join()\n        navigator.clipboard.writeText(csvTrackFeatures).then(result =>{\n            console.log(`Copy ${csvTrackFeatures} to clipboard.`)\n        }).catch(error =>{\n            console.log('Failed to copy track features to clipboard.')\n        })\n    }\n\n    useLayoutEffect(\n        () => {\n            getToken()\n            if (props.trackId) {\n                setArtist('')\n                setTitle('')\n                getTrackInfo(props.trackId)\n                console.log(`${title}/${artist}\\nBPM:${bpm}\\nKey: ${pitch}\\n`)\n                console.log(tweetBody)\n            }\n        },\n        // eslint-disable-next-line\n        [props.trackId]\n    )\n\n    if (props.trackId === ''){\n        return (\n            <div></div>\n        )\n    }\n    else if (props.idType !== 'track'){\n        return (\n            <div>\n                <Block textAlign={\"center\"} style={{ width: 300, margin: 'auto'}}>\n                    <Notification color={\"warning\"}>\n                        <p>ERROR: URL/URI is not track.</p>\n                    </Notification>\n                </Block>\n            </div>\n        )\n    }\n    else if (artist === ''){\n        return (\n            <div></div>\n        )\n    }\n    return(\n        <div>\n            <Card style={{ width: 350, margin: 'auto'}}>\n                <Card.Header>\n                    <Card.Header.Title size={6}>\n                        {title}<br/>\n                        {artist}\n                    </Card.Header.Title>\n                </Card.Header>\n                <Card.Image size={'square'} src={image} />\n                <Card.Content>\n                    <Media>\n                        <Media.Item>\n                            <Heading subtitle size={6}>\n                                <p>BPM: {bpm}</p>\n                                <p>Key: {pitch}</p>\n                                <p>Duration: {duration}</p>\n                            </Heading>\n                        </Media.Item>\n                    </Media>\n                    <TwitterShareButton\n                        title={`${title}/${artist}\\nBPM:${bpm}\\nKey: ${pitch}\\n`}\n                        url={trackUrl}\n                        hashtags={[\"FEATRACK\"]}\n                    >\n                        <TwitterIcon size={32} round />\n                    </TwitterShareButton>\n                    <Button onClick={copyHandler}>\n                        Copy audio features to clipboard\n                    </Button>\n                </Card.Content>\n            </Card>\n        </div>\n    )\n\n}\n\nexport default TrackInfo","import axios from 'axios';\nimport React, {useState} from 'react';\nimport {Block, Box, Container, Form, Heading, Hero} from 'react-bulma-components';\n\nimport TrackInfo from './TrackInfo';\n\n\nimport 'bulma/css/bulma.min.css';\n\naxios.defaults.headers.post['Content-Type'] ='application/x-www-form-urlencoded'\nconst { Input } = Form;\n\n\nfunction Featrack() {\n    const [track, setId] = useState('')\n    const [pressedKey, setKey] = useState(NaN)\n    const [idType, setIdType] = useState('')\n\n    function parseId(value){\n        const url = new URL(value)\n        console.log(url)\n        if (url.protocol === 'https:') {\n            const paths = url.pathname.split('/')\n            if (paths[1] === 'track') {\n                setIdType(paths[1])\n                return paths[2]\n            }\n        }\n        else if (url.protocol === 'spotify:') {\n            const parts = url.pathname.split(':')\n            if (parts.length === 2 && parts[0] === 'track') {\n                setIdType(parts[0])\n                return parts[1]\n            }\n        }\n    }\n\n    function handlePress(e){\n        if (e.which === 13){\n            e.preventDefault()\n            const trackId = parseId(e.target.value)\n            setId(trackId)\n            setKey(e.which)\n        }\n    }\n\n    return (\n        <div>\n            <Hero>\n                <Hero.Body>\n                    <Container>\n                        <Heading size={1} textAlign={\"center\"}>\n                            FEATRACK\n                        </Heading>\n                        <Heading subtitle size={5} textAlign={\"center\"}>\n                            Browse audio features with Spotify API\n                        </Heading>\n                        <Block>\n                            <Box style={{ width: 600, margin: 'auto' }}>\n                                <Input\n                                    size=\"medium\"\n                                    type=\"text\"\n                                    placeholder=\"Track URL or Spotify URI\"\n                                    defaultValue={track}\n                                    onKeyDown={(e) => handlePress(e)}\n                                />\n                            </Box>\n                        </Block>\n                        <Block>\n                            <TrackInfo keyNum={pressedKey} trackId={track} idType={idType}/>\n                        </Block>\n                    </Container>\n                </Hero.Body>\n            </Hero>\n        </div>\n    )\n}\n\nexport default Featrack","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Featrack from './Featrack'\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Featrack />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}