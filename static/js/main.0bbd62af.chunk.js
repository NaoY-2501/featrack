(this.webpackJsonpfeatrack=this.webpackJsonpfeatrack||[]).push([[0],{187:function(t,e,c){"use strict";c.r(e);var a=c(0),n=c.n(a),o=c(15),i=c.n(o),r=(c(38),c(6)),s=c(10),d=c.n(s),j=c(5),l=c(31),u=c(188),b=c(189),p=c(32),h=(c(63),c(25),c(4)),f={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},O={0:"Minor",1:"Major"},x={0:"A",1:"B"};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var m=function(t){var e=Object(a.useState)(""),c=Object(r.a)(e,2),n=c[0],o=c[1],i=Object(a.useState)(""),s=Object(r.a)(i,2),m=s[0],g=s[1],y=Object(a.useState)(""),v=Object(r.a)(y,2),k=v[0],C=v[1],w=Object(a.useState)(""),S=Object(r.a)(w,2),B=S[0],A=S[1],I=Object(a.useState)(""),T=Object(r.a)(I,2),F=T[0],R=T[1],z=Object(a.useState)(0),M=Object(r.a)(z,2),H=M[0],D=M[1],E=Object(a.useState)(""),K=Object(r.a)(E,2),L=K[0],P=K[1],U=Object(a.useState)(""),_=Object(r.a)(U,2),N=_[0],G=_[1],J=Object(a.useState)(""),q=Object(r.a)(J,2),V=q[0],Q=q[1];function W(t){var e={headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}};d.a.get("https://api.spotify.com/v1/tracks/".concat(t),e).then((function(t){var e=t.data;g(e.artists[0].name),C(e.album.images[0].url),A(e.name),R(function(t){var e=Math.floor(t/6e4),c=(t%6e4/1e3).toFixed(0);return e+":"+(c<10?"0":"")+c}(e.duration_ms))})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/tracks/").concat(t))})),d.a.get("https://api.spotify.com/v1/audio-features?ids=".concat(t),e).then((function(e){var c=e.data.audio_features[0];D(c.tempo.toFixed(1)),P(f[c.key].concat(" ",O[c.mode]));var a=Object(p.getKey)({pitchClass:c.key,mode:c.mode}),n="".concat(a.camelotPosition).concat(x[a.mode]);Q(n),G("https://open.spotify.com/track/".concat(t))})).catch((function(e){console.log("".concat(e.response.status," from https://api.spotify.com/v1/audio-features?ids=").concat(t))}))}return Object(a.useLayoutEffect)((function(){!function(){var t={headers:{Authorization:"Basic ".concat(l.Buffer.from("".concat("bb1f4a4747b241498c617ade99bd166d",":").concat("fab9e637ef614626803d203a743cdc0c"),"utf-8").toString("base64")),"Content-Type":"application/x-www-form-urlencoded"}};d.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",t).then((function(t){o(t.data.access_token)})).catch((function(t){console.log("".concat(t.response.status," on fetch token."))}))}(),t.trackId&&(g(""),A(""),W(t.trackId))}),[t.trackId]),""===t.trackId?Object(h.jsx)("div",{}):"track"!==t.idType?Object(h.jsx)("div",{children:Object(h.jsx)(j.Block,{textAlign:"center",style:{width:300,margin:"auto"},children:Object(h.jsx)(j.Notification,{color:"warning",children:Object(h.jsx)("p",{children:"ERROR: URL/URI is not track."})})})}):""===m?Object(h.jsx)("div",{}):Object(h.jsx)("div",{children:Object(h.jsxs)(j.Card,{style:{width:350,margin:"auto"},children:[Object(h.jsx)(j.Card.Header,{children:Object(h.jsxs)(j.Card.Header.Title,{size:6,children:[B,Object(h.jsx)("br",{}),m]})}),Object(h.jsx)(j.Card.Image,{size:"square",src:k}),Object(h.jsxs)(j.Card.Content,{children:[Object(h.jsx)(j.Media,{children:Object(h.jsx)(j.Media.Item,{children:Object(h.jsxs)(j.Heading,{subtitle:!0,size:6,children:[Object(h.jsxs)("p",{children:["BPM: ",H]}),Object(h.jsxs)("p",{children:["Key: ",L]}),Object(h.jsxs)("p",{children:["Camelot: ",V]}),Object(h.jsxs)("p",{children:["Duration: ",F]})]})})}),Object(h.jsx)(u.a,{title:"".concat(B,"/").concat(m,"\nBPM:").concat(H,"\nKey: ").concat(L,"\nCamelot: ").concat(V),url:N,hashtags:["FEATRACK"],children:Object(h.jsx)(b.a,{size:32,round:!0})}),Object(h.jsx)(j.Button,{onClick:function(){var t=[B,m,H,L,V].join();navigator.clipboard.writeText(t).then((function(e){console.log("Copy ".concat(t," to clipboard."))})).catch((function(t){console.log("Failed to copy track features to clipboard.")}))},children:"Copy audio features to clipboard"})]})]})})};d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var g=j.Form.Input;var y=function(){var t=Object(a.useState)(""),e=Object(r.a)(t,2),c=e[0],n=e[1],o=Object(a.useState)(NaN),i=Object(r.a)(o,2),s=i[0],d=i[1],l=Object(a.useState)(""),u=Object(r.a)(l,2),b=u[0],p=u[1];function f(t){if(13===t.which){t.preventDefault();var e=function(t){var e=new URL(t);if(console.log(e),"https:"===e.protocol){var c=e.pathname.split("/");if("track"===c[1])return p(c[1]),c[2]}else if("spotify:"===e.protocol){var a=e.pathname.split(":");if(2===a.length&&"track"===a[0])return p(a[0]),a[1]}}(t.target.value);n(e),d(t.which)}}return Object(h.jsx)("div",{children:Object(h.jsx)(j.Hero,{children:Object(h.jsx)(j.Hero.Body,{children:Object(h.jsxs)(j.Container,{children:[Object(h.jsx)(j.Heading,{size:1,textAlign:"center",children:"FEATRACK"}),Object(h.jsx)(j.Heading,{subtitle:!0,size:5,textAlign:"center",children:"Browse audio features with Spotify API"}),Object(h.jsx)(j.Block,{children:Object(h.jsx)(j.Box,{style:{width:600,margin:"auto"},children:Object(h.jsx)(g,{size:"medium",type:"text",placeholder:"Track URL or Spotify URI",defaultValue:c,onKeyDown:function(t){return f(t)}})})}),Object(h.jsx)(j.Block,{children:Object(h.jsx)(m,{keyNum:s,trackId:c,idType:b})})]})})})})},v=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,190)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,o=e.getLCP,i=e.getTTFB;c(t),a(t),n(t),o(t),i(t)}))};i.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(y,{})}),document.getElementById("root")),v()},38:function(t,e,c){},63:function(t,e,c){}},[[187,1,2]]]);
//# sourceMappingURL=main.0bbd62af.chunk.js.map